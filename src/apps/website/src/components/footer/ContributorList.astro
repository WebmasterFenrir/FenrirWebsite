---
const { owner, repo } = Astro.props;

if (!owner || !repo) {
  throw new Error("owner and repo are required");
}

const response = await fetch(
  `https://api.github.com/repos/${owner}/${repo}/contributors`
);

if (!response.ok) {
  const text = await response.text();
  throw new Error(`GitHub API error ${response.status}: ${text}`);
}

const contributors = await response.json();
---

<section class="group relative overflow-hidden rounded-2xl border border-transparent bg-zinc-900/40 text-white shadow-lg transition-all duration-300 hover:border-purple-400/30 hover:shadow-purple-500/20">
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(168,85,247,0.22),transparent_60%)] opacity-0 transition-opacity duration-300 group-hover:opacity-100" />
  <div class="relative space-y-6 px-6 py-8">
    <header class="space-y-3">
      <p class="text-[10px] font-black uppercase tracking-[0.4em] text-yellow-400">Open Source</p>
      <h2 class="text-2xl font-semibold tracking-tight">Contributors</h2>
      <p class="text-xs uppercase tracking-[0.2em] text-zinc-400">
        {contributors.length} amazing humans
      </p>
    </header>
    <ul class="flex flex-wrap gap-4">
      {contributors.map((contributor: any) => (
        <li class="flex items-center gap-3 rounded-xl bg-zinc-950/60 px-4 py-2 text-sm font-medium text-zinc-300">
          <img
            src={`${contributor.avatar_url}&s=64`}
            alt={contributor.login}
            width="40"
            height="40"
            class="h-10 w-10 rounded-full border border-purple-500/30 object-cover"
            loading="lazy"
          />
          <a
            href={contributor.html_url}
            target="_blank"
            rel="noopener noreferrer"
            class="transition-colors duration-200 hover:text-purple-300"
          >
            {contributor.login}
          </a>
        </li>
      ))}
    </ul>
  </div>
</section>

